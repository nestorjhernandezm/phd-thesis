\section{Thesis Outline}\label{sec:intro_thesis_outline}

In this section, we define the observed challenges from the state of the art in the area and which are our proposals to solve them. Based on this, we define the thesis objectives to go beyond the state of the art. At the end, we describe the research lines to attains these goals. The particular contribution of each paper of the thesis and its related publications are detailed in Section~\ref{sec:contributions}.

\subsection{Challenges in the State of the Art}
Currently from the state of the art, different problems were identified from both prior work and observations during the thesis. These occur at different levels of the cooperation process when sending a content from the \ac{BS} to the mobile devices. These problems pose specific technical challenges. The problems addresed in the thesis were: (i) which transmission schemes do the device use to cooperate, (ii) how many should cooperate, (iii) which are ideal codes to achieve a high throughput and low energy consumption at the devices and the \ac{BS} and (iv) how should the devices be scheduled to transmit once the schemes are defined. Therefore, we describe the major challenges posed by these problems and how they were addressed during this research.

\subsubsection{1. Cloud Sizes: From Unicast D2D Pairs to Multicast D2D Multi-Hop Clouds}
\label{sec:cloud_sizes}

The state of the start has considered the use of short-range communication technologies to establish unicast transmission between pair of devices to download a content and reduce the total completion time from a \ac{BS} \cite{khamfroush2013minimizing,khamfroush2015optimal}. To observe potential gains in these scenarios, we investigated the potential of multicasting to more devices inside the mobile cloud to cooperate in papers {[\ref{paper:paperA}]}, \#[1] (from the co-authored) and {[\ref{paper:paperB}]}. To understand the potential gains, Fig.~\ref{fig:cloud_sizes} presents the benefits of increasing the amount of devices that cooperate to share a content. The figure considers a scenario similar to the presented in Fig.~\ref{fig:cooperation}. It indicates the mean total number of transmissions required to decode a batch of $g$ packets coded with \ac{RLNC} in a multicast network of a \ac{BS} and $N$ devices vs. the number of devices cooperating inside each cluster (cloud size) $N_u$. Thus, there are $\lceil \frac{N}{N_u} \rceil$ clusters and $1 \leq N_u \leq N$. This figure presents the spectrum of cooperation since $N_u = 1$ represents the case of broadcast, i.e. no cooperation between neighboring devices; $N_u = N$ represents full cooperation of one cloud with all the devices and all other cases represent variable degrees of cooperation of various clouds with some devices.

For this reference scenario, it is assumed that all the packet erasures are independent and identically distributed. Also, all the devices present the same packet erasure probability $\epsilon$ for simplicity. It is also assumed that all devices have connectivity with the \ac{BS} and are fully connected through a short-range orthogonal communications channel, e.g. \ac{D2D}, \ac{WiFi} network, etc. The packet erasures of the links inside the cloud are also independent and identically distributed with probability $\epsilon'$. Also, we consider the case where $N \gg g$. After some transmissions have been made from the base station, the devices share locally coded (or recoded) packets in rounds with broadcast with \ac{RLNC} in a coordinated fashion. An orthogonal channel is used to recover from the packet erasures when the \ac{BS} transmitted. By reviewing the scaling laws of this metric in \cite{eryilmaz2008delay} and analyzing this scenario, some trends can be obtained.

\begin{figure}[h]
  \centering
  \includegraphics[width=\textwidth]{introduction/figures/cloud_sizes.pdf}
  \caption{Total number of transmissions trends vs. Cluster size.}
\label{fig:cloud_sizes}
\end{figure}

First, the mean total number of transmissions of broadcast with \ac{RLNC} of $N$ devices, homogeneous packet erasure probability $\epsilon$ and $N \gg g$ scales as $\log_{\frac{1}{\epsilon}}(N)$ \cite{eryilmaz2008delay}. This is the value at $N_u = 1$. Second, the blue curve models the mean number of transmissions that the \ac{BS} makes. As $N_u \rightarrow N$, the number of transmission from the \ac{BS} approaches to the bare minimum $g$. This occurs because the probability of not receiving a packet in a cloud is ${\epsilon}^{N_u}$, which vanishes rapidly for increasing $N_u$. Third, the red dashed curve stands for the total number of transmissions of the devices. This curve accounts for both the transmissions from the \ac{BS} and inside each cloud. When the clouds are small, the amount of transmissions from the \ac{BS} diminish more rapidly than the amount of transmissions inside each cloud. However, after some amount of devices per cloud, adding more devices does not reduce the amount of transmissions from the \ac{BS} significantly. Instead, this only increases the amount of transmissions within the clouds. As $N_u \rightarrow N$, the total number of transmissions of the devices approaches to the maximum possible, $ g + \log_{\frac{1}{\epsilon'}}(N - 1)$ since at least one device is transmitting at every round.

Currently, the state of the art considers using either $N_u = 1$ or $N_u = 2$ since it is not considered to multicast to many devices with \ac{RLNC}. More important, from Fig.~\ref{fig:cloud_sizes} it can be observed that an optimal cloud size exists to reduce the number of transmissions. This value also represents the operational point of highest throughput and lowest energy consumption vs. other designs with a different cloud size. Therefore, the regimes and conditions to achieve these values were investigated by looking when is cooperation better than broadcast in terms of the ratio of the data rates of the cellular links and between the \ac{D2D} links. We also varied the amount of devices with connectivity to the cellular network inside a cloud.

\subsubsection{2. RLNC Performance Parameters: Design Trade-Off}
\label{sec:rlnc_trade_off}
There has been different studies that addressed the impact of \ac{RLNC} parameters in its performance, i.e. the generation size $g$ and the field size $q$, in both theoretical and practical applications with mobile devices\cite{heide2009network,lucani2009random,heide2011code,trullols2011exact,zhao2012notes,paramanathan2013lean}. The generation size affects the algorithmic complexity of both encoding and decoding. The computational complexity of encoding \ac{RLNC} packets scales as $\mathcal{O}(g)$, i.e. linear, since it involves $g$ multiplications and $g - 1$ sums. For the decoding, Gaussian elimination is of cubic complexity $\mathcal{O}(g^3)$ in principle, given the inversion of a square matrix of size $g$. However, a structured Gaussian elimination implementation for \ac{RLNC} can achieve $\mathcal{O}(g^2)$ for $g < 512$ as reported in \cite{paramanathan2013lean}. Given that the field size effects are diverse, we summarize them in Table~\ref{tab:rlnc_parameters} which shows the effects of the field size for two principal regions: low and high field sizes. The criteria to separate them has been to consider a field size as high for values higher than $2^8$ for reasons that will be explained below. The table also displays various metrics to evaluate the performance of the code.

\begin{table}[h]
  \centering
  \caption{Field size effects in the code performance.}
  \begin{tabular}{|M{0.75cm}|M{2cm}|M{1.5cm}|M{2.65cm}|M{2cm}|}

    \hline
    $q$         & Linear Dependency & Signalling & Overhead Major Contributor & Field Complexity  \\
    \hline
    \hline
    $< 2^8$     & High       & Low        & Linear Dependency & Low \\
    \hline
    $\geq 2^8$  & Low        & High       & Signalling & High \\
    \hline

  \end{tabular}

\vspace{0.2cm}
\label{tab:rlnc_parameters}
\end{table}

As mentioned in Section~\ref{sec:rlnc}, more linearly dependent coded packets are generated towards the end of the transmission process. Dependent packets are useless since they provide no new information to the decoder and are discarded. Once $g - 1$ independent coded packets have been received, the probability of generating a dependent coded packet is $\frac{1}{q}$ \cite{lucani2009random,trullols2011exact,zhao2012notes}. For the binary field, i.e. $GF(2)$, there is a 50\% chance of generating useless packets. In the case of $GF(2^8)$, this chance reduces to less than 0.5\% making it depreciable in practice. In terms of the generation size, the linear dependency effect can be observed on the average amount of transmissions for decoding. For $GF(2)$, $g + 1.6$ transmissions on average are required to decode the original set, whereas for $GF(2^8)$ this value can be approximated to $g$ for practical purposes.

Signalling is interpreted as the amount of bits required to represent the coding coefficients. These bits are attached to each coded packet and for each original packet \cite{heide2011code}. We referred to this value previously as $|v_{i}| = g \times \log_{2}(q)$ which grows linearly with $g$ and logarithmically with $q$. For $GF(2)$, only 1 bit per packet is required to be included in each coded packet to signal the coding coefficients. However, for fields sizes of $q = 2^8 = 256$ or higher, one byte or more are necessary for each original packet to signal its coding coefficients. Therefore for high generation sizes, high fields could potentially make the amount of signalling much larger than the original packet size. Thus, overhead accounts for both effects of the linear dependency and coding coefficients signalling respect to useful data. In Table~\ref{tab:rlnc_parameters}, it has been specified which is the effect that accounts for most of the total overhead in the specified region. For low fields, most of the overhead comes from linear dependency effect , but for higher field sizes the signalling from the coding coefficients becomes critical.

Finally, field complexity accounts for the computational cost and time required for the operations in \ac{GF} arithmetics required to process the data. Besides algorithmic complexities, the field utilized to operate on the data affects the code performance in terms of time and energy spent on processing. The binary field poses a low computational burden on the device carrying the operations since modulo-2 operations are XOR/AND operations. However, increasing the field size requires to define and operate with new arithmetics which incur in higher processing times. Thus, a proper field size for mobile devices is important to ensure a satisfactoring code processing speeds \cite{heide2009network,paramanathan2013lean}.

In terms of mobile applications, all of these aspects relate to the throughput and energy consumption. Ideally, parameter configurations that achieve: (i) low number of transmissions required to decode, (ii) low total overhead and (iii) low field complexity are desirable. Such code performance metrics would lead to the goal of high throughput and low energy consumption at the mobile devices and the \ac{BS}. However, as seen from the previous description, these objectives are conflictive posing a \textit{trade-off} for using only \ac{RLNC} in our scenario. Since most of the state of the art in this network coding area considers \ac{RLNC} as its erasure correcting code, other code constructions that avoid the presented trade-off should be considered in order to achieve the previous goals.

\subsubsection{3. Evaluation of Transmission Policies in Wireless Local Area Networks}
In order to obtain rules to schedule transmitters in multicast scenarios with \ac{RLNC}, the works in \cite{khamfroush2013minimizing,khamfroush2015optimal,khamfroush2014coded} have evaluated the cases of: (i) multicasting to \ac{D2D} cooperative pairs and (ii) multicasting to a pair of nodes sharing a unidirectional unicast link in the presence of interferers. In these works, the theoretical problem of finding the ideal policy reduces to solving a \ac{MDP}. However, obtaining the best policy poses a computational burden that is unfeasible in real networks, thus requiring the application of heuristics that are evaluated in self-defined numerical simulators or even implementations. Using these simulators to evaluate heuristics could potentially not be maintenable or reusable slowing the design process of the protocol developers. Moreover, these protocols assume that the devices have been assigned orthogonal communication resources. Nevertheless, in scenarios of this type, devices may access the medium in an uncontrolled manner thus requiring the evaluation of a decentralized access method. Therefore, we considered a software framework developed in paper {[\ref{paper:paperC}]} for the ns-3 simulator \cite{ns3link} which is well tested, supported and maintained. The purpose is to have a standard simulation environment to evaluate simple heuristics as we made for two transmission policies of a network with various relays in paper {[\ref{paper:paperD}]} and for a reliable multicast demo in paper \#[2].

\subsection{Objectives}
\label{sec:objectives}
Based in the previous challenges, this thesis pushes the state of the art by using multicast \ac{D2D} mobile clouds in cooperative wireless networks with \ac{RLNC} and other network codes since current techniques focus mostly in \ac{D2D} communications based in unicast pairs with either \ac{RLNC} or non-composable rateless codes. Therefore, the objectives of this thesis are to:

\begin{enumerate}

\item Define the regions and conditions in terms of the energy, data rate costs but also code parameters, where cooperation with \ac{RLNC} provides a better performance than broadcast with \ac{RLNC} in terms of data throughput and energy consumption at the \ac{BS} and the mobile devices.

\item Study the dominating regimes and ideal cloud sizes to observe if there exists ideal values for high system throughput and low energy consumption for multicast \ac{D2D} cooperative clouds as described in Section~\ref{sec:cloud_sizes}.

\item Propose and study code constructions that overcome the \ac{RLNC} trade-off and achieve the goals described from Section~\ref{sec:rlnc_trade_off}. In this sense, the objective is to find codes that permit to retain the low coding coefficients overhead from a low field size, but also the low number of transmissions overhead from high fields.

\item Study the effect of transmission policies under a \ac{WLAN} scenario in an easy-to-deploy manner. In this case, medium access mechanisms to avoid interference should be considered. Also, the use of standard simulation tools that are reusable for the research community and well maintained is desired.

\end{enumerate}

\subsection{Research Lines}

To achieve the previous objectives and based on the concepts of multicast \ac{D2D} communications with network coding in cooperative wireless networks, we followed the research path shown in Fig.~\ref{fig:proposal}. The figure shows the evolution from current multicast networks to our proposal. Existing 4G mobile networks offer to work with a broadcast scheme, e.g. \ac{LTE-A} \ac{eMBMS} to address streaming services. As mentioned earlier, this scheme does not allow cooperation and may utilize either rateless codes or \ac{RLNC} for \ac{FEC} at the application layer. Thus, the current state of the state proposals have evaluated cooperation techniques based in \ac{D2D} pairs. However, as seen from Section~\ref{sec:cloud_sizes}, using more devices to cooperate has significant advantages. Moreover, as described in Sections~\ref{sec:erasure_codes} and \ref{sec:rlnc}, only \ac{RLNC} can be applied to avoid the caveats from end-to-end rateless codes. Still, as mentioned in Section~\ref{sec:rlnc}, \ac{RLNC} codes present a trade-off between linear dependency overhead, signalling overhead and field complexity.

Our proposal focuses on the rightmost diagram of Fig.~\ref{fig:proposal} where we have indicated the thesis papers that review the objectives mentioned in Section~\ref{sec:objectives}. We divided the research in two major lines to achieve the objectives previously stated which we describe below. The first line goal was to obtain network codes and operational regimes for cooperation in inband underlay \ac{D2D} multicast cellular networks to enhance the throughput, reduce the energy consumption from the \ac{BS} and the mobile devices, but also minimize the total overhead from \ac{RLNC}. The second line goal was to investigate transmission policies for mobile devices in a decentralized multi-hop \ac{WLAN} to also improve the previously mentioned metrics in this type of networks utilizing simulation frameworks that could be reproducible and are well accepted, tested and maintained.

\begin{figure}[h]
  \centering
  \includegraphics[width=\textwidth]{introduction/figures/thesis-diagrams.pdf}
  \caption{State of the Art and Thesis Proposal.}
\label{fig:proposal}
\end{figure}

\subsubsection{1. Network Code Constructions and Regimes in Multicast Cooperative D2D Cellular Networks}

Given the increase of data rates in cellular networks such as \ac{LTE-A}, we first addressed the question of when is it reasonable for a set of devices to cooperate when downloading a multicast content in a cellular network. The underlying reason is that there has been improvements on the cellular data rates that had approached them to the order of local area network data rates. Thus, in paper {[\ref{paper:paperA}]}, we investigated which are the regions where cooperation with \ac{RLNC} achieves a better perfomance than broadcast with \ac{RLNC} in terms of the data rate and energy costs for each transmission, to address objective 1 of the thesis proposal in Fig.~\ref{fig:proposal}. To do so, we reviewed two \ac{RLNC} based schemes: broadcast and full (single cloud) cooperation with different parameters since we wanted to observe the spectrum of cooperation. We considered a variable of number devices with cellular connectivity which we referred as \textit{heads} since they transmit to the devices without connectivity, i.e. the \textit{non-heads}. For the latter scheme, multicast \ac{D2D} communications take place within the cellular spectrum in a round-robin coordinated manner for the devices to distribute their content. We considered the problem of reliably transmitting a batch of $g$ packets using \ac{RLNC} with a field size $q$ in a time-slotted system. We considered independent heterogeneous packet erasure rates on the links from the source to the receivers to derive the expressions, but evaluated them to the same value for simplicity. For the local links, we considered bidirectional symmetric channels with the same packet erasure rate. We modeled both the throughput and the energy consumption as function of the number of transmissions required to decode for both schemes and found its analytical distributions. Later, we assignated a cost to each transmission according to values from the state of the art. We defined the cooperation gains as the regions where the cooperation scheme incurs in less transmissions than the broadcast scheme and calculated them with numerical simulations. From this work, we observed that codes with standard generation size and high field size, provided a reduced amount of transmissions translating into at least two fold gains for the throughput and energy consumption by just transmitting with data rates two times higher in the local area network than in the cellular network. However, in this work we did not include the effect of the signalling due to the coding coefficients which will reduce the gains mentioned metrics impacting in the choice of a coding scheme but at the expense of including overhead due to the coding coefficients used in \ac{RLNC}.

In paper {[\ref{paper:paperB}]}, we extended the analytical framework from paper {[\ref{paper:paperA}]} in various aspects. First, we include all the cooperation spectrum mentioned in Section~\ref{sec:cloud_sizes} by considering various mobile clouds with a variable number of heads per cloud to address objective 2 from the proposal diagram of Fig.~\ref{fig:proposal}. Second, we refined our model by defining our network as an inband underlay \ac{D2D} mobile network. Thus, we considered that any interference is managed in these scenarios by an arbitrary resource allocator from the cellular network. Hence, the interference is prevented under pre-defined network planning. We also consider how to make our system reliable in a practical manner by including simple feedback rules. To overcome the \ac{RLNC} trade-off, we evaluated code constructions to optimize and reduce the total overhead from both redundant transmissions and coding coefficients to address objective 3 from our proposal in Fig.~\ref{fig:proposal}. We considered the employment of \ac{TC} \cite{heidelucani2015composite} which are a very recent advances on the state of the art and had not been considered for these scenarios. We extended further our analytical framework to include these codes and observed that \ac{RLNC} is a special case in our framework. Finally, we analyzed the possible \ac{D2D} cooperative cloud (cluster) sizes to observe the operational regimes first with heterogeneous sizes and finally with homogeneous sizes. We found that a homogenenous cloud size provides the best possible scenario to improve our metrics. Our results achieve a total overhead of less than 3\% with respect to a 10\% when using \ac{RLNC}.

\subsubsection{2. Transmission Policies in Wireless Local Area Networks}

To evaluate transmission policies in a simple and reproducible fashion, we first made a software framework with the ns-3 simulator \cite{kodons3link,kodons3tutorial} in paper {[\ref{paper:paperC}]}. The purpose of the framework was to enable network coding simulations with the Kodo library in standard open source simulators aimed for the research community. For this work, we reviewed the state of the art in terms of simulators aimed for network coding applications. We found that, although there were initiatives in this area, there was missing a proper simulation tool for the network coding area deployed in standard frameworks that is well supported, tested and maintained. Thus, we considered using the ns-3 simulator with Kodo as an external library that provides the network coding functionalities. We indicated how to do this procedure. To date, this source code is maintained with the most recent and stable version of ns-3. This software consists of a set of examples broadcast and multi-hop networks using network coding to transmit a batch of packets since these were our cases. Nevertheless, we indicate to any developer user how to make their own examples in \cite{kodons3link}. For beginner users, we created a ddescriptive tutorial in \cite{kodons3tutorial}, that shows how to run the examples and what do they simulate. The examples deploy a protocol stack over ns-3 using its implementation of the \ac{OSI} layer protocols. We implemented a \ac{RLNC} coding layer using Kodo above an \ac{UDP} socket layer. Our implementation uses the Kodo and ns-3 \ac{API} through C++ classes that are helpers to represent our network topologies. We tested the validity of this framework by comparing a very large set of simulations with different parameters against theoretical values of the same scenarios observing great accuracy. This project was presented to the ns-3 research community in the conference were paper {[\ref{paper:paperC}]} was presented having great acceptance and today the framework is available online in the mentioned link.

With the software framework from paper {[\ref{paper:paperC}]}, in paper {[\ref{paper:paperD}]} we reviewed two transmission policies for a set of $N$ \ac{D2D} cooperating relay devices without inter-connectivity to provide data services to an end device. We made this to address objective 4 from the proposal diagram of Fig.~\ref{fig:proposal}. We made this approach since we first considered a device without connectivity covered by only one cloud in our previous works. In this case, we removed this restriction by considering that many devices may reach an end device through a local network. However, this implies that interference should be avoided with a \ac{MAC} mechanism in a decentralized manner, given that two or more devices may transmit at the same time. We considered independent packet erasure rates for all the links. Although, we evaluated them to homogenoeus values for each hop to have less complexity in our results. For this scenario, the transmission policies between the relays and the end device were: (i) a random forwarding scheme and (ii) recoding with \ac{RLNC} since we wanted to investigate the gains due to recoding. For these policies and our \ac{MAC}, each relay senses the wireless medium and transmits with probability $p_i,\ i \in [1,N]$ and only if it receives a packet from the \ac{BS} to avoid sending redundant packets. We evaluated $p_i = p,\ \forall i$ to keep the analysis simple and give all the devices the same priority. Later, we made an extensive set of ns-3 simulations, $10^3$ for each combination of parameters including packet erasures, number of relays and field sizes; to compare these policies in terms of source, relay and total transmissions required to decode at the destination. Our results showed that ideal access probabilities reduce the number of transmissions. Lower access probabilities below the optimal value increase the number of transmissions from the source to the relays, whereas higher access probabilities above the optimal value increase the number of transmissions from the relays to the destination. These findings allowed to verify policies in reproducible settings which otherwise would have required extensive mathematical analysis. Also, these results show that it is possible to achieve between 50\% and 75\% gains by enabling recoding and using an access mechanism that assigns equal probability to all the devices in the local network.

\clearpage